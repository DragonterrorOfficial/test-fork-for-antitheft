!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("phaser")):"function"==typeof define&&define.amd?define(["phaser"],e):"object"==typeof exports?exports.NineSlice=e(require("phaser")):t.NineSlice=e(t.Phaser)}(window,function(r){return n={},i.m=o=[function(t,e){t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EVENTS=void 0;var i=function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t},c=n(r(0)),d=n(r(4));function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t){return t&&t.__esModule?t:{default:t}}function l(t){return{tl:{x:t.topLeft.width,y:t.topLeft.height},tr:{x:t.topRight.width,y:t.topRight.height},bl:{x:t.bottomLeft.width,y:t.bottomLeft.height},br:{x:t.bottomRight.width,y:t.bottomRight.height}}}var y=function(t){var e,r,i,o=t;"number"==typeof o.sourceLayout.width&&(r=(e=o.sourceLayout).width,i=e.height,o.sourceLayout={topLeft:{width:r,height:i}});var n=o.sourceLayout;n.topRight=n.topRight||n.topLeft,n.bottomRight=n.bottomRight||n.topLeft,n.bottomLeft=n.bottomLeft||n.topLeft;var a,s=Math.max(n.topLeft.height,n.topRight.height),u=Math.max(n.topRight.width,n.bottomRight.width),h=Math.max(n.bottomLeft.height,n.bottomRight.height),l=Math.max(n.topLeft.width,n.bottomLeft.width);return o.safeOffsets||(o.safeOffsets={top:s,right:u,bottom:h,left:l}),void 0===o.minSizing||!1!==o.minSizing?(a=o.safeOffsets,o.minSizing={width:a?Math.max(a.left+a.right,l+u):l+u,height:a?Math.max(a.top+a.bottom,s+h):s+h}):o.minSizing=!1,o},b="__BASE",g="__MISSING",p=e.EVENTS={UPDATE_SAFE_BOUNDS:"updatesafebounds"},a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(m,c.default.GameObjects.RenderTexture),i(m,[{key:"updateSafeBounds",value:function(){var t,e,r,i,o,n,a,s,u,h,l,f,c,d;this._initalized&&(e=(t=this.sliceConfig.safeOffsets).top,r=t.right,i=t.bottom,o=t.left,n=this.x+o,a=this.y+e,s=this.width-(o+r),u=this.height-(e+i),l=(h=this._safeBounds).x,f=h.y,c=h.width,d=h.height,n===l&&a===f&&s===c&&u===d||(this._safeBounds.setTo(this.x+o,this.y+e,this.width-(o+r),this.height-(e+i)),this.events.emit(p.UPDATE_SAFE_BOUNDS,this,this._safeBounds)),this._g&&(this._g.lineStyle(1,65280),this._g.strokeRectShape(this._safeBounds)))}},{key:"resize",value:function(t,e){var r,i=(this.sliceConfig||{}).minSizing,o=i?Math.max(i.height,e):e,n=i?Math.max(i.width,t):t;(e<o||t<n)&&(r="Attempted to set NineSlice size less than minimum ("+t+"x"+e+").",console.error(r)),function t(e,r,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,r,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"resize",this).call(this,n,o),this._initalized&&(this._g&&this._g.clear(),this.drawFrames(),this.updateSafeBounds())}},{key:"initFrames",value:function(){function t(t,e,r,i,o){var n=a.mkFrameName(t);s.has(n)?a._frameCache[t]=s.frames[n]:a._frameCache[t]=s.add(n,0,u+e,h+r,i,o)}var a=this,s=this.sourceTex,e=this.sourceFrame.width,r=this.sourceFrame.height,u=this.sourceFrame.cutX,h=this.sourceFrame.cutY,i=l(this.sliceConfig.sourceLayout);t("topLeft",0,0,i.tl.x,i.tl.y),t("topRight",e-i.tr.x,0,i.tr.x,i.tr.y),t("bottomRight",e-i.br.x,r-i.br.y,i.br.x,i.br.y),t("bottomLeft",0,r-i.bl.y,i.bl.x,i.bl.y),t("topMiddle",i.tl.x,0,e-(i.tl.x+i.tr.x),Math.max(i.tl.y,i.tr.y)),t("bottomMiddle",i.bl.x,r-Math.max(i.bl.y,i.br.y),e-(i.bl.x+i.br.x),Math.max(i.bl.y,i.br.y)),t("leftMiddle",0,i.tl.y,Math.max(i.tl.x,i.bl.x),r-(i.tl.y+i.bl.y)),t("rightMiddle",e-Math.max(i.tr.x,i.br.x),i.tr.y,Math.max(i.tr.x,i.br.x),r-i.tr.y-i.br.y);var o=Math.min(i.tl.x,i.bl.x),n=Math.min(i.tl.y,i.tr.y);t("center",o,n,e-o-Math.min(i.tr.x,i.br.x),r-n-Math.min(i.br.y,i.bl.y))}},{key:"getUsableBounds",value:function(){return this._initalized?this._safeBounds:null}},{key:"drawFrames",value:function(){var t,e,r,i,o,n,a,u=this;this._initalized&&(this._g&&this._g.lineStyle(1,16711680),t=l(this.sliceConfig.sourceLayout),e=this._frameCache,r=function(t,e,r,i,o){var n,a,s;0<i&&0<o&&(u._g&&u._g.strokeRect(u.x+e,u.y+r,i,o),n=u.scene.make.image({key:u.sourceTex.key,frame:t.name,x:0,y:0}),a=i/t.width,s=o/t.height,n.setOrigin(0).setScale(a,s),u.draw(n,e,r),n.destroy())},i=Math.min(t.tl.x,t.bl.x),o=Math.min(t.tr.x,t.br.x),n=Math.min(t.tl.y,t.tr.y),a=Math.min(t.bl.y,t.br.y),this.clear(),r(e.center,i,n,this.width-i-o,this.height-n-a),r(e.topMiddle,t.tl.x,0,this.width-t.tl.x-t.tr.x,e.topMiddle.height),r(e.bottomMiddle,t.bl.x,this.height-e.bottomMiddle.height,this.width-t.bl.x-t.br.x,e.bottomMiddle.height),r(e.leftMiddle,0,t.tl.y,e.leftMiddle.width,this.height-t.tl.y-t.bl.y),r(e.rightMiddle,this.width-t.tr.x,t.tr.y,e.rightMiddle.width,this.height-t.tr.y-t.br.y),r(e.topLeft,0,0,t.tl.x,t.tl.y),r(e.topRight,this.width-t.tr.x,0,t.tr.x,t.tr.y),r(e.bottomRight,this.width-t.br.x,this.height-t.br.y,t.br.x,t.br.y),r(e.bottomLeft,0,this.height-t.bl.y,t.bl.x,t.bl.y))}},{key:"enableDebugDraw",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._g&&this._g.clear(),this._g=t?this.scene.add.graphics(this.x,this.y):null,this.drawFrames(),this.updateSafeBounds()}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._g&&(this._g.clear(),this.drawFrames()),this._y=t,this.updateSafeBounds())}},{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._g&&(this._g.clear(),this.drawFrames()),this._x=t,this.updateSafeBounds())}}]),m);function m(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(t){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,t,0,0,32,32));i.initFrames=i.initFrames.bind(i),i.getUsableBounds=i.getUsableBounds.bind(i),i.drawFrames=i.drawFrames.bind(i),i.resize=i.resize.bind(i),i.updateSafeBounds=i.updateSafeBounds.bind(i),i.enableDebugDraw=i.enableDebugDraw.bind(i),i.events=new c.default.Events.EventEmitter,i.sliceConfig=y(e),i._safeBounds=new c.default.Geom.Rectangle;var o=i.sliceConfig,n=o.sourceKey,a=o.sourceFrame;if(i.sourceTex=t.sys.textures.get(i.sliceConfig.sourceKey),!n)throw new Error("NineSlice requires a texture sourceKey to be specified.");if(!i.sourceTex||i.sourceTex.key===g)throw new Error("Expected source image "+n+" not found.");i._framePrefix=""+(0,d.default)(JSON.stringify({sourceKey:n,sourceFrame:a},404)),i.mkFrameName=function(t){return i._framePrefix+"-"+t},i._frameCache={};var s="string"==typeof a||"number"==typeof a?a:b;i.sourceFrame=i.sourceTex.get(s),i.initFrames(),i._initalized=!0;var u=r.x,h=r.y,l=r.width,f=r.height;return i.setPosition(u||0,h||0),i.resize(l||i.sourceFrame.width,f||i.sourceFrame.height),i.updateSafeBounds(),i}e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){switch(t.length){case 1:return[t[0],t[0],t[0],t[0]];case 2:return[t[0],t[1],t[0],t[1]];case 3:return[t[0],t[1],t[2],t[1]];case 4:return t}throw new Error("Received ${arr.length} offset values, expected 1 to 4.")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],i=!0,o=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){o=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw n}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},o=a(r(0)),P=a(r(1)),L=a(r(2));function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return t&&t.__esModule?t:{default:t}}var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o.default.Plugins.BasePlugin),i(u,[{key:"addNineSlice",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=h(this.scene,e);return this.displayList.add(i),i}},{key:"makeNineSlice",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h(this.scene,e)}}]),u);function u(t){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t));return t.registerGameObject("nineslice",e.addNineSlice,e.makeNineSlice),e}e.default=s;var h=function(t,e){if(2===e.length)return new P.default(t,e[0],e[1]);if(e.length<6)throw new Error("Expected at least 6 arguments to NineSlice creator, received "+e.length+".");7<e.length&&console.error("Expected less than 7 arguments for NineSlice creation, received "+e.length+".");var r,i,o,n,a,s,u,h,l=E(e,6),f=l[0],c=l[1],d=l[2],y=l[3],b=l[4],g=l[5],p={},m={x:f,y:c,width:d,height:y};if("string"==typeof b?p.sourceKey=b:(r=b.key,i=b.frame,p.sourceKey=r,"string"!=typeof i&&"number"!=typeof i||(p.sourceFrame=b.frame)),"number"==typeof g?p.sourceLayout={width:g,height:g}:Array.isArray(g)?(o=(0,L.default)(g),a=(n=E(o,4))[0],s=n[1],u=n[2],h=n[3],p.sourceLayout={topLeft:{width:h,height:a},topRight:{width:s,height:a},bottomRight:{width:s,height:u},bottomLeft:{width:h,height:u}}):p.sourceLayout=g,6<e.length)if("number"==typeof e[6]){var x=e[6];p.safeOffsets={top:x,right:x,bottom:x,left:x}}else{if(!Array.isArray(e[6]))throw new Error("Expected argument number or array for argument 7, got "+j(e[6])+".");var _=(0,L.default)(e[6]),w=E(_,4),v=w[0],S=w[1],O=w[2],M=w[3];p.safeOffsets={top:v,right:S,bottom:O,left:M}}return new P.default(t,p,m)},l={key:"NineSlice",plugin:s,start:!0};s.DefaultCfg=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r,i,o=3&t.length,n=t.length-o,a=e,s=3432918353,u=461845907,h=0;h<n;)i=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,a=27492+(65535&(r=5*(65535&(a=(a^=i=(65535&(i=(i=(65535&i)*s+(((i>>>16)*s&65535)<<16)&4294967295)<<15|i>>>17))*u+(((i>>>16)*u&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(i=0,o){case 3:i^=(255&t.charCodeAt(h+2))<<16;case 2:i^=(255&t.charCodeAt(h+1))<<8;case 1:a^=i=(65535&(i=(i=(65535&(i^=255&t.charCodeAt(h)))*s+(((i>>>16)*s&65535)<<16)&4294967295)<<15|i>>>17))*u+(((i>>>16)*u&65535)<<16)&4294967295}return a^=t.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1);Object.defineProperty(e,"NineSlice",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(e,"EVENTS",{enumerable:!0,get:function(){return i.EVENTS}});var o=r(3);function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Plugin",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,r){t.exports=r(5)}],i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6);function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var o,n});